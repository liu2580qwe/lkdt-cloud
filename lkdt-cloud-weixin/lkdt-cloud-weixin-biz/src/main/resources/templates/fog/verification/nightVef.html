<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <title>百度ECHarts</title>
    <meta name="keywords" content="">
    <meta name="description" content="">

    <link rel="shortcut icon" href="favicon.ico"> <link href="/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="/css/font-awesome.css?v=4.4.0" rel="stylesheet">

    <link href="/css/animate.css" rel="stylesheet">
    <link href="/css/style.css?v=4.1.0" rel="stylesheet">

</head>

<body class="gray-bg">
    <div class="wrapper wrapper-content animated fadeInRight">
    	<input id="equName" name="equName" th:value="${camera.equName}"  type="hidden">
    	<input id="epId" name="epId" th:value="${camera.epId}"  type="hidden">
        <div class="row">
            <div class="col-sm-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>可见度折线图</h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                            <a class="close-link">
                                <i class="fa fa-times"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content">
                        <div class="echarts" id="echarts-line-chart"></div>
                        <div>
                        	<label><input data-index="0" name="btSelectItem" type="radio" onclick="removeHill(this.checked)">去除波峰</label> 
                        	<label><input data-index="0" name="btSelectItem" type="radio" onclick="removeTrough(this.checked)">去除波谷</label> 
                        	<label><input data-index="0" name="btSelectItem" type="radio" onclick="getFog()">还原</label> 
                        </div>
                        
                    </div>
                     
                </div>
            </div>
      </div>

    </div>
    <!-- 全局js -->
    <script src="/lkdtWX/js/jquery.min.js?v=2.1.4"></script>
    <script src="/lkdtWX/js/bootstrap.min.js?v=3.3.6"></script>

    <!-- ECharts -->
    <script src="/lkdtWX/js/plugins/echarts/echarts-all.js"></script>

    <!-- 自定义js -->
    <script src="/lkdtWX/js/content.js?v=1.0.0"></script>


    <!-- ECharts demo data -->
    <script>
    $(function () {
    	getFog();
    });
    var optiontext=$("#equName").val();
    var epId=$("#epId").val();
    var lineoption = {
            title : {
                text: optiontext
            },
            tooltip : {
                trigger: 'axis'
            },
            legend: {
                data:['可见度']
            },
            grid:{
                x:50,
                x2:40,
                y:40
            },
            dataZoom : {
                show : true,
                realtime: true,
                start : 5,
                end : 100
            },
            yAxis : [
                {
                    type : 'value',
                    axisLabel : {
                    }
                }
            ],
            series : [ ]
        };
    
    function getFog(flg) {
    	 $.getJSON('/fog/vef/fogVal',{cameraId:epId},function(res){
             var lineChart = echarts.init(document.getElementById("echarts-line-chart"));
             lineoption.series = res.series;
             lineoption.xAxis = res.xAxis;
             lineChart.setOption(lineoption);
             $(window).resize(lineChart.resize);
         });
    }
    
    
    function removeHill(chk) {
    	if(!chk) {
    		return;
    	}
	   	 $.getJSON('/fog/vef/fogVal',{actype:"removeHill",cameraId:epId},function(res){
	         var lineChart = echarts.init(document.getElementById("echarts-line-chart"));
	         lineoption.series = res.series;
	         lineoption.xAxis = res.xAxis;
	         lineChart.setOption(lineoption);
	         $(window).resize(lineChart.resize);
	     });
    }
    
    
    function removeTrough(chk) {
    	if(!chk) {
    		return;
    	}
	   	 $.getJSON('/fog/vef/fogVal',{actype:"removeTrough",cameraId:epId},function(res){
	         var lineChart = echarts.init(document.getElementById("echarts-line-chart"));
	         lineoption.series = res.series;
	         lineoption.xAxis = res.xAxis;
	         lineChart.setOption(lineoption);
	         $(window).resize(lineChart.resize);
	     });
    }
    

    </script>


</body>

</html>
